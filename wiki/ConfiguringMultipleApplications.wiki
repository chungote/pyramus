#summary How to configure Hibernate Search for multiple applications
#labels Phase-Deploy

= Introduction =

PyramusWebServices shares its database with Pyramus, so the two
applications never have conflicting data. Full-text search indexes are
not stored in the database, so another method is required to provide
the same index for the applications. This problem is solved using
clustering technology.

= Details =

Pyramus uses Hibernate Search for full text search data, and Hibernate
Search uses Lucene as an indexing back-end. In turn, Lucene uses
Infinispan as a store for its index, and Infinispan delegates
the clustering and coordination services to JGroups. Here's a picture:

http://pyramus.googlecode.com/svn/wiki/hibernatesearch-stack.PNG

JBoss needs to be configured in order to JGroups to work. The
configuration options in
`standalone/configuration/standalone-full-ha.xml`
are used as a basis; however, the multicast address should be set up
correctly according to the cluster's subnet. In most installations
Pyramus is installed on a single machine, so the subnet mask
`224.0.0.1` must be used. Here's the bindings that must be added to
`standalone.xml`, in a `socket-binding-group` element (usually `standard-sockets`):

{{{
<socket-binding name="jgroups-diagnostics" port="0" multicast-address="224.0.75.75" multicast-port="7500"/>
<socket-binding name="jgroups-mping" port="0" multicast-address="${jboss.default.multicast.address:224.0.0.1}" multicast-port="45700"/>
<socket-binding name="jgroups-udp" port="55200" multicast-address="${jboss.default.multicast.address:224.0.0.1}" multicast-port="45688"/>
<socket-binding name="jgroups-udp-fd" port="54200"/>
}}}
