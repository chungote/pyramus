#summary Quick start guide for installing Pyramus on top of JBoss

==Prerequisites==

  * Pyramus is JavaEE application and thus requires that Java runtime environment is installed on the computer.
  
==Database==

  * Get MySQL server up and running.
  * Make sure MySQL uses InnoDB as default
  * Login to MySQL as root
  * Create new database with name of your choosing 
    * In example we use pyramus. 
    * Encoding should be utf8 (create database pyramus default charset utf8)
  * Download Xmldb-updater from (http://code.google.com/p/java-xmldb-updater/downloads/list)
  * Extract Xmldb-updater somewhere in your computer
  * Download MySQL Connector (http://dev.mysql.com/downloads/connector/j/)
  * Extract mysql-connector-java-x.x.x-bin.jar from connector zip and copy it to xml-db-updater/drivers folder
  * Download latest database updates from http://code.google.com/p/pyramus/downloads/ and extract them to some folder (e.g. /PyramusUpdates/) 
  * Rename preferences.sample as preferences.properties in xml-db-updater folder
  * Edit preferences.properties -file with text editor and set: updates.folder to match your pyramus updates folder (e.g. /PyramusUpdates/) and update database settings to match your configuration.
  * Start updater and run suggested updates.

==JBoss==

  * Download and extract JBoss (http://www.jboss.org/jbossas/downloads/)
  * Navigate to JBoss/bin folder in console (or command prompt in windows)
  * Run ./add-user.sh (or add-user.bat in windows) and add new Management User to ManagementRealm
  * Copy mysql connector jar into JBoss/standalone/deployments -folder
  * Create new keystore into JBoss/standalone/configuration -folder
    * keytool -genkey -keysize 2048 -keyalg RSA -keystore jboss.keystore -alias tomcat
    * Use your host name as CN (e.g. dev.pyramus.fi)
  * Open keystore with Portecle (http://sourceforge.net/projects/portecle/)
  * Export tomcat alias in PEM format to hard drive
  * Import exported sertificate as trusted back to keystore with name root
  * Edit JBoss/standalone/configuration/standalone.xml file
  * Locate urn:jboss:domain:web:1.1 -subsystem
  * Add redirect-port="443" attribute into http connector
  * Add https connector:
{{{
<connector name="https" protocol="HTTP/1.1" scheme="https" socket-binding="https" secure="true">
  <ssl name="ssl" key-alias="tomcat" password="password" certificate-key-file="../standalone/configuration/jboss.keystore" protocol="TLS" verify-client="false"/>
</connector>
}}}
  * Change http and https ports into 80 and 443 in socket-binding-group

==Setup==
  * Download latest version of Pyramus and Pyramus reports from http://code.google.com/p/pyramus/downloads/  
  * Copy both files into JBoss/standalone/deployments -folder and rename them to ROOT.war and PyramusReports.war
  * Start JBoss 
  * Wait until project is deployed and navigate to http://youraddress/ with your web browser  
  * If Pyramus loads fine, navigate to http://youraddress/system/initialdata.page with your web browser.
  * Login in with admin / querty